# Часто задаваемые вопросы (FAQ) - Проект VISAGINAS

## Проблемы с деплоем

### Почему не работает автоматический деплой на Netlify через GitHub?

Часто при деплое SvelteKit проектов на Netlify через GitHub возникает ошибка "Could not resolve entry module 'index.html'". Это происходит потому, что SvelteKit использует собственный формат сборки, который может быть несовместим с настройками по умолчанию для Netlify.

**Решение**: Используйте скрипт `deploy-netlify.bat`, который временно переключает адаптер на `adapter-static` для создания статической сборки, которую можно загрузить на Netlify.

### Как изменить директорию для публикации?

По умолчанию скрипт деплоя использует директорию `build` для публикации. Если вам нужно изменить это, отредактируйте следующие файлы:
- В `netlify.toml` измените значение `publish = "build"` на нужную директорию
- В `deploy-netlify.bat` найдите места с `build` и замените на нужную директорию

### Как настроить деплой для проекта с SSR (Server-Side Rendering)?

SvelteKit поддерживает режим SSR на Netlify, для этого нужно:
1. Убедиться, что вы используете `@sveltejs/adapter-netlify`
2. В `svelte.config.js` добавить настройку `split: false` для адаптера
3. В `netlify.toml` изменить директорию публикации на `.netlify/functions-internal`

## Структура проекта

### Где добавлять новые страницы?

Новые страницы добавляются в директорию `src/routes`:
- Для страницы `/about` создайте файл `src/routes/about/+page.svelte`
- Для страницы `/contact` создайте файл `src/routes/contact/+page.svelte`

### Как добавить новые изображения или статические файлы?

Статические файлы должны быть размещены в директории `static/`:
- Изображения: `static/images/`
- Иконки: `static/favicon.png`
- Другие статические файлы: `static/assets/`

### Как изменить главную страницу?

Главная страница находится в файле `src/routes/+page.svelte`. Отредактируйте этот файл для изменения главной страницы.

### Как настроить многоязычность?

Проект использует `svelte-i18n` для локализации:
1. Добавьте новые файлы локализации в директорию `src/locales/`
2. Файлы должны быть в формате JSON с переводами
3. Импортируйте и настройте их в файле, где инициализируется i18n

## Работа с Netlify

### Как подключить свой домен?

1. Войдите в панель управления Netlify
2. Выберите ваш сайт
3. Перейдите в раздел "Domain settings"
4. Нажмите "Add custom domain"
5. Следуйте инструкциям для настройки DNS

### Как настроить переменные окружения?

1. В панели управления Netlify перейдите в раздел "Site settings"
2. Перейдите в "Build & deploy" -> "Environment"
3. Нажмите "Edit variables" и добавьте необходимые переменные

### Как настроить перенаправления (redirects)?

Добавьте раздел `[[redirects]]` в ваш файл `netlify.toml`:

```toml
[[redirects]]
  from = "/old-page"
  to = "/new-page"
  status = 301
  force = true
```

## Скрипт деплоя

### Что делает каждая часть скрипта deploy-netlify.bat?

1. **Проверка инструментов**: Убеждается, что у вас установлены Node.js и Netlify CLI
2. **Установка зависимостей**: Устанавливает все необходимые npm-пакеты
3. **Временная конфигурация**: Создает временную версию svelte.config.js для статической сборки
4. **Сборка проекта**: Запускает npm run build для создания готовых файлов
5. **Восстановление конфигурации**: Возвращает оригинальные настройки
6. **Авторизация в Netlify**: Проверяет вход в Netlify и при необходимости запрашивает авторизацию
7. **Деплой на Netlify**: Либо создает новый сайт, либо обновляет существующий

### Что делать, если скрипт выдает ошибки с кодировкой (проблемы с символами)?

Windows может некорректно отображать batch-файлы с символами не из ASCII. Решения:
1. Используйте только английские символы в скрипте
2. Сохраните файл в кодировке CP866
3. Используйте PowerShell скрипт вместо batch-файла

### Можно ли запустить скрипт на macOS или Linux?

Скрипт `deploy-netlify.bat` работает только на Windows. Для macOS или Linux создайте shell-скрипт с аналогичной функциональностью:

```bash
#!/bin/bash
# deploy-netlify.sh - аналог для macOS/Linux

# Проверка инструментов
if ! command -v npm &> /dev/null; then
    echo "Node.js/npm not found. Please install it first."
    exit 1
fi

# ... и т.д.
```

## Основные команды

### Как запустить проект локально?

```bash
npm install
npm run dev
```

### Как собрать проект без деплоя?

```bash
npm run build
```

### Как проверить собранный проект перед деплоем?

```bash
npm run preview
```